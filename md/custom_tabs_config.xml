<?xml version="1.0" encoding="utf-8"?>
<mdscript name="MCT_Config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../#modding/xsd/md.xsd">
    <cues>
        <cue name="RegisterMenu" instantiate="true">
            <conditions>
                <event_cue_signalled cue="md.Simple_Menu_Options.Reloaded"/>
            </conditions>
            <actions>
                <signal_cue_instantly
                        cue="md.Simple_Menu_API.Register_Options_Menu"
                        param="table[
                            $id = 'custom_tabs_extension_options_menu',
                            $columns = 12,
                            $title = {26124, 100},
                            $onOpen = OptionsMenu
                        ]"/>
                <cancel_cue cue="this"/>
            </actions>
        </cue>
        <cue name="Vault" namespace="this" version="3">
            <actions>
                <set_value name="$debugPrefix" exact="'Mycu MCT: '"/>
                <set_value name="$debugChance" exact="0"/>

                <debug_text text="$debugPrefix + 'Vault INIT'" chance="$debugChance"/>

                <set_value name="$customTabs" exact="table[
                    $mode = 'move',
                    $modeIndex = 1,
                    $number = 3,
                    $position = 2,

                    $tabName1 = {26124, 200}+ ' A',
                    $tabIcon1 = 'mct_icon_a',
                    $tabIcon1Index = 1,
                    $tabName2 = {26124, 200}+ ' B',
                    $tabIcon2 = 'mct_icon_b',
                    $tabIcon2Index = 2,
                    $tabName3 = {26124, 200}+ ' C',
                    $tabIcon3 = 'mct_icon_c',
                    $tabIcon3Index = 3,
                    $tabName4 = {26124, 200}+ ' D',
                    $tabIcon4 = 'mct_icon_d',
                    $tabIcon4Index = 4,
                    $tabName5 = {26124, 200}+ ' E',
                    $tabIcon5 = 'mct_icon_e',
                    $tabIcon5Index = 5,
                    $tabName6 = {26124, 200}+ ' F',
                    $tabIcon6 = 'mct_icon_f',
                    $tabIcon6Index = 6,
                    $tabName7 = {26124, 200}+ ' G',
                    $tabIcon7 = 'mct_icon_g',
                    $tabIcon7Index = 7,
                    $tabName8 = {26124, 200}+ ' H',
                    $tabIcon8 = 'mct_icon_h',
                    $tabIcon8Index = 8,
                    $tabName9 = {26124, 200}+ ' I',
                    $tabIcon9 = 'mct_icon_i',
                    $tabIcon9Index = 9,

                    $disableVanillaTabs1 = 0,
                    $disableVanillaTabs2 = 0,
                    $disableVanillaTabs3 = 0,
                    $disableVanillaTabs4 = 0,
                    $disableVanillaTabs5 = 0,
                    $resetConfirm = 0,
                ]"/>

                <set_value name="player.entity.$customTabsConfig" exact="$customTabs"/>
            </actions>
            <patch sinceversion="2">
                <set_value name="$customTabs.$mode" exact="'move'"/>
                <set_value name="$customTabs.$modeIndex" exact="1"/>
            </patch>
            <patch sinceversion="3">
                <set_value name="$customTabs.$tabName4" exact="{26124, 200} + ' D'"/>
                <set_value name="$customTabs.$tabName5" exact="{26124, 200} + ' E'"/>
                <set_value name="$customTabs.$tabName6" exact="{26124, 200} + ' F'"/>
                <set_value name="$customTabs.$tabName7" exact="{26124, 200} + ' G'"/>
                <set_value name="$customTabs.$tabName8" exact="{26124, 200} + ' H'"/>
                <set_value name="$customTabs.$tabName9" exact="{26124, 200} + ' I'"/>

                <set_value name="$customTabs.$tabIcon4" exact="'mct_icon_d'"/>
                <set_value name="$customTabs.$tabIcon5" exact="'mct_icon_e'"/>
                <set_value name="$customTabs.$tabIcon6" exact="'mct_icon_f'"/>
                <set_value name="$customTabs.$tabIcon7" exact="'mct_icon_g'"/>
                <set_value name="$customTabs.$tabIcon8" exact="'mct_icon_h'"/>
                <set_value name="$customTabs.$tabIcon9" exact="'mct_icon_i'"/>

                <set_value name="$customTabs.$tabIcon3Index" exact="3"/>
                <set_value name="$customTabs.$tabIcon4Index" exact="4"/>
                <set_value name="$customTabs.$tabIcon5Index" exact="5"/>
                <set_value name="$customTabs.$tabIcon6Index" exact="6"/>
                <set_value name="$customTabs.$tabIcon7Index" exact="7"/>
                <set_value name="$customTabs.$tabIcon8Index" exact="8"/>
                <set_value name="$customTabs.$tabIcon9Index" exact="9"/>

                <set_value name="$customTabs.$disableVanillaTabs1" exact="0"/>
                <set_value name="$customTabs.$disableVanillaTabs2" exact="0"/>
                <set_value name="$customTabs.$disableVanillaTabs3" exact="0"/>
                <set_value name="$customTabs.$disableVanillaTabs4" exact="0"/>
                <set_value name="$customTabs.$disableVanillaTabs5" exact="0"/>
            </patch>
        </cue>
        <cue name="OptionsMenu" instantiate="true">
            <conditions>
                <event_cue_signalled/>
            </conditions>
            <actions>
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" param="table[$selectable=false]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $colSpan = 5, $text={26124, 203}, $color = 'Helper.color.blue']"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $colSpan = 5, $text={26124, 204}, $color = 'Helper.color.white', $halign = 'right']"/>
                <!-- number of tabs -->
                <signal_cue_instantly
                        cue="md.Simple_Menu_API.Make_Slider"
                        param="table[
						$id = 'number',
						$start = md.MCT_Config.Vault.$customTabs.$number,
						$col = 6,
						$colSpan = 7,
						$height = 25,
						$text = table[$text=''],
						$min = 1, $max = 9, $step = 1,
						$default = md.MCT_Config.Vault.$customTabs.$number,
						$mouseOverText = {26124, 205},
						$onSliderCellChanged = OnSliderChange
					]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $colSpan = 5, $text={26124, 206}, $color = 'Helper.color.white', $halign = 'right']"/>
                <!-- tabs position -->
                <signal_cue_instantly
                        cue="md.Simple_Menu_API.Make_Dropdown"
                        param="table[
						$id = 'position',
						$col = 6,
						$colSpan = 7,
						$height = 25,
						$options = [
							table[$text={26124, 207}, $id = 1, $value=1],
							table[$text={26124, 208}, $id = 2, $value=2],
							table[$text={26124, 209}, $id = 3, $value=3],
						],
						$startOption = md.MCT_Config.Vault.$customTabs.$position,
						$mouseOverText = {26124, 210},
						$onDropDownConfirmed = OnDropDownChange
					]"/>

                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $colSpan = 5, $text={26124, 226}, $color = 'Helper.color.white', $halign = 'right']"/>
                <!-- tabs mode -->
                <signal_cue_instantly
                        cue="md.Simple_Menu_API.Make_Dropdown"
                        param="table[
						$id = 'mode',
						$col = 6,
						$colSpan = 7,
						$height = 25,
						$options = [
							table[$text={26124, 227}, $id = 1, $value='move'],
							table[$text={26124, 228}, $id = 2, $value='clone'],
						],
						$startOption = md.MCT_Config.Vault.$customTabs.$modeIndex,
						$mouseOverText = {26124, 229},
						$onDropDownConfirmed = OnDropDownChange
					]"/>


                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" param="table[$selectable=false]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $colSpan = 5, $text={26124, 260}, $color = 'Helper.color.blue']"/>

                <!-- disable vanilla tabs -->
                <set_value name="$disables" exact="table[
                    $row1 = table[
                        $disable1 = table[ $index = 1, $col = 1, $text = {26124, 261}, $mouseOverText = {26124, 270} ],
                        $disable2 = table[ $index = 2, $col = 6, $text = {26124, 262}, $mouseOverText = {26124, 270} ],
                    ],
                    $row2 = table[
                        $disable3 = table[ $index = 3, $col = 1, $text = {26124, 263}, $mouseOverText = {26124, 270} ],
                        $disable4 = table[ $index = 4, $col = 6, $text = {26124, 264}, $mouseOverText = {26124, 270} ],
                    ],
                    $row3 = table[
                        $disable5 = table[ $index = 5, $col = 1, $text = {26124, 265}, $mouseOverText = {26124, 270} ],
                    ]
                ]"/>

                <do_for_each valuename="$disableRow" in="$disables">
                    <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                    <do_for_each valuename="$disable" in="$disableRow">
                        <signal_cue_instantly
                                cue="md.Simple_Menu_API.Make_CheckBox"
                                param="table[
                                    $id = 'disableVanillaTabs'+$disable.$index,
                                    $checked = md.MCT_Config.Vault.$customTabs.{'$disableVanillaTabs' + $disable.$index},
                                    $col = $disable.$col,
                                    $x = 35,
                                    $width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
                                    $mouseOverText = $disable.$mouseOverText,
                                    $onClick = OnCheckboxClick,
                                ]"/>
                        <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=$disable.$col + 1, $colSpan = 4, $text=$disable.$text, $color = 'Helper.color.white']"/>
                    </do_for_each>
                </do_for_each>


                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']"/>


                <!-- tab definitions -->
                <set_value name="$configs" exact="table[
                    $row1 = table[
                        $labels = table[
                            $row1 = table[ $index = 1, $col = 1, $text = {26124, 211} ],
                            $row2 = table[ $index = 2, $col = 5, $text = {26124, 212} ],
                            $row3 = table[ $index = 3, $col = 9, $text = {26124, 213} ],
                        ],
                        $inputs = table[
                            $row1 = table[ $index = 1, $col = 1, $mouseover = {26124, 251} ],
                            $row2 = table[ $index = 2, $col = 5, $mouseover = {26124, 251} ],
                            $row3 = table[ $index = 3, $col = 9, $mouseover = {26124, 251} ]
                        ],
                        $dropdowns = table[
                            $row1 = table[ $index = 1, $col = 1, $mouseover = {26124, 230} ],
                            $row2 = table[ $index = 2, $col = 5, $mouseover = {26124, 230} ],
                            $row3 = table[ $index = 3, $col = 9, $mouseover = {26124, 230} ]
                        ]
                    ],
                    $row2 = table[
                        $labels = table[
                            $row1 = table[ $index = 4, $col = 1, $text = {26124, 214} ],
                            $row2 = table[ $index = 5, $col = 5, $text = {26124, 215} ],
                            $row3 = table[ $index = 6, $col = 9, $text = {26124, 216} ],
                        ],
                        $inputs = table[
                            $row1 = table[ $index = 4, $col = 1, $mouseover = {26124, 251} ],
                            $row2 = table[ $index = 5, $col = 5, $mouseover = {26124, 251} ],
                            $row3 = table[ $index = 6, $col = 9, $mouseover = {26124, 251} ]
                        ],
                        $dropdowns = table[
                            $row1 = table[ $index = 4, $col = 1, $mouseover = {26124, 230} ],
                            $row2 = table[ $index = 5, $col = 5, $mouseover = {26124, 230} ],
                            $row3 = table[ $index = 6, $col = 9, $mouseover = {26124, 230} ]
                        ]
                    ],
                    $row3 = table[
                        $labels = table[
                            $row1 = table[ $index = 7, $col = 1, $text = {26124, 217} ],
                            $row2 = table[ $index = 8, $col = 5, $text = {26124, 218} ],
                            $row3 = table[ $index = 9, $col = 9, $text = {26124, 219} ],
                        ],
                        $inputs = table[
                            $row1 = table[ $index = 7, $col = 1, $mouseover = {26124, 251} ],
                            $row2 = table[ $index = 8, $col = 5, $mouseover = {26124, 251} ],
                            $row3 = table[ $index = 9, $col = 9, $mouseover = {26124, 251} ]
                        ],
                        $dropdowns = table[
                            $row1 = table[ $index = 7, $col = 1, $mouseover = {26124, 230} ],
                            $row2 = table[ $index = 8, $col = 5, $mouseover = {26124, 230} ],
                            $row3 = table[ $index = 9, $col = 9, $mouseover = {26124, 230} ]
                        ]
                    ]
                ]"/>

                <!-- icon definitions -->
                <set_value name="$icons" exact="[
                    'mct_icon_a',
                    'mct_icon_b',
                    'mct_icon_c',
                    'mct_icon_d',
                    'mct_icon_e',
                    'mct_icon_f',
                    'mct_icon_g',
                    'mct_icon_h',
                    'mct_icon_i',
                    'mct_icon_1',
                    'mct_icon_2',
                    'mct_icon_3',
                    'mct_icon_4',
                    'mct_icon_5',
                    'mct_icon_6',
                    'mct_icon_7',
                    'mct_icon_8',
                    'mct_icon_9',
                    'shipbuildst_shield',
                    'vt_guild',
                    'shipbuildst_turret',
                    'shipbuildst_weapon',
                    'shipbuildst_consumable',
                    'mapst_filtersystem',
                    'mapst_legend',
                    'mapst_fs_other',
                    'mapst_mission_guidance',
                    'tlt_help',
                    'mapst_information',
                    'mapst_fs_think',
                    'vt_exploration',
                    'mapst_mission_main',
                    'mapst_ol_ship_xl',
                    'mapst_ol_ship_l',
                    'mapst_ol_ship_m',
                    'mapst_ol_ship_s',
                    'mapst_ol_ships',
                    'mapst_ol_fleets',
                    'tlt_playerinfo',
                    'vt_team',
                    'mapst_mission_mentor',
                    'shipbuildst_crew',
                    'mapst_mission_guild',
                    'vt_contactlist',
                    'vt_reward_crewskill',
                    'mapst_loadout',
                    'tlt_optionsmenu',
                    'pi_logbook',
                    'tlt_encyclopedia',
                    'tlt_research',
                    'mapst_ao_orderqueue',
                    'mapst_standing_orders',
                    'mapst_fs_trade',
                    'mapst_plotmanagement',
                    'mapst_cheats',
                    'mapst_ol_inventory',
                    'mapst_ao_default_object',
                    'vt_season',
                    'mapst_ol_deployables',
                    'mapst_fs_trade',
                    'mapst_fs_fight',
                    'vt_aggressive',
                    'mapst_fs_diplomacy',
                    'mapst_fs_mining',
                    'mapst_ao_default_global',
                    'vt_reward_inventory',
                    'shipbuildst_paint',
                    'mapst_fs_build',
                    'vt_economic',
                    'tlt_map',
                    'tlt_shipinteractions',
                    'tlt_terraforming',
                ]"/>

                <set_value name="$dropdownOptions" exact="[]"/>
                <do_for_each name="$icon" in="$icons" counter="$i">
                    <append_to_list name="$dropdownOptions" exact="table[$text={26124, 232} + $i, $id=$i, $value=$icon]"/>
                </do_for_each>

                <do_for_each name="$id" valuename="$data" in="$configs">
                    <!-- labels -->
                    <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                    <do_for_each valuename="$label" in="$data.$labels">
                        <do_if value="$label.$index le md.MCT_Config.Vault.$customTabs.$number">
                            <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=$label.$col, $colSpan = 4, $text=$label.$text, $color = 'Helper.color.blue']"/>
                        </do_if>
                    </do_for_each>

                    <!-- inputs -->
                    <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                    <do_for_each valuename="$input" in="$data.$inputs">
                        <do_if value="$input.$index le md.MCT_Config.Vault.$customTabs.$number">
                            <signal_cue_instantly
                                    cue="md.Simple_Menu_API.Make_EditBox"
                                    param="table[
                                    $id = 'tabName' + $input.$index,
                                    $col = $input.$col,
                                    $colSpan = 4,
                                    $height = 25,
                                    $defaultText = md.MCT_Config.Vault.$customTabs.{'$tabName' + $input.$index},
                                    $mouseOverText = $input.$mouseover,
                                    $onTextChanged = OnEditBoxDeactivated,
                                    $onEditBoxDeactivated = OnEditBoxDeactivated,
                                ]"/>
                        </do_if>
                    </do_for_each>

                    <!-- dropdowns -->
                    <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                    <do_for_each valuename="$dropdown" in="$data.$dropdowns">
                        <do_if value="$dropdown.$index le md.MCT_Config.Vault.$customTabs.$number">
                            <signal_cue_instantly
                                    cue="md.Simple_Menu_API.Make_Dropdown"
                                    param="table[
                                    $id = 'tabIcon' + $dropdown.$index,
                                    $col = $dropdown.$col,
                                    $colSpan = 4,
                                    $height = 25,
                                    $options = $dropdownOptions,
                                    $startOption = md.MCT_Config.Vault.$customTabs.{'$tabIcon' + $dropdown.$index + 'Index'},
                                    $mouseOverText = $dropdown.$mouseover,
                                    $onDropDownConfirmed = OnDropDownChange,
                            ]"/>
                        </do_if>
                    </do_for_each>

                    <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                    <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']"/>
                    <!--<set_value name="$loopIndex" operation="add"/>-->
                </do_for_each>

                <!-- icon gallery -->
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" param="table[$selectable=false]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" param="table[$selectable=false]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $colSpan = 12, $text={26124, 231}, $color = 'Helper.color.blue', $halign = 'left']"/>

                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" param="table[$selectable=false]"/>

                <set_value name="$iconIndex" exact="1"/>
                <do_for_each name="$icon" in="$icons">
                    <!--
                        Formula to get column numbers as [1,3,5,7,9,11,1,3,5,7,9,11,1,3...]
                        y = 2* ((x-1) mod 6) - 1
                     -->
                    <set_value name="$col" exact="2 * ( ($iconIndex-1) % 6 ) + 1"/>

                    <signal_cue_instantly
                            cue="md.Simple_Menu_API.Make_Icon"
                            param="table[
                                    $width = 45,
                                    $height = 45,
                                    $x = 30,
                                    $col = $col,
                                    $colSpan = 2,
                                    $icon  = $icon,
                                    $mouseOverText = {26124, 232} + $iconIndex + ' ' + $icon,
                                    $text = table[
                                      $text   =  {26124, 232} + $iconIndex,
                                      $color  = 'Helper.color.grey',
                                      $halign = 'center',
                                      $x = 55,
                                      $y = 42,
                                    ],
                                ]"/>
                    <set_value name="$iconIndex" operation="add"/>

                    <do_if value="$col == 11">
                        <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" param="table[$selectable=false]"/>
                        <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']"/>
                        <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" param="table[$selectable=false]"/>
                    </do_if>

                </do_for_each>

                <!-- emergency -->
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" param="table[$selectable=false]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$id='resetText',  $col=1, $colSpan = 12, $text={26124, 220}, $color = 'Helper.color.blue', $halign = 'left', $selectable=false ]"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
                <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $colSpan = 5, $text='', $color = 'Helper.color.white', $halign = 'right']"/>
                <signal_cue_instantly
                        cue="md.Simple_Menu_API.Make_CheckBox"
                        param="table[
                            $id = 'resetConfirm',
                            $checked = md.MCT_Config.Vault.$customTabs.$resetConfirm,
                            $col = 9,
                            $x = 35,
                            $width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
                            $mouseOverText = {26124, 221},
                            $onClick = OnCheckboxClick,
	    				]"/>
                <signal_cue_instantly
                        cue="md.Simple_Menu_API.Make_Button"
                        param="table[
                            $col = 10,
                            $colSpan = 2,
                            $text = table[
                              $text   = {26124, 225},
                              $color  = 'Helper.color.grey',
                              $halign = 'center',
                            ],
                            $mouseOverText = {26124, 222},
                            $onClick = OnResetButtonClick,
                        ]"/>
            </actions>
        </cue>
        <cue name="OnResetButtonClick" instantiate="true">
            <conditions>
                <event_cue_signalled/>
            </conditions>
            <actions>
                <debug_text text="md.MCT_Config.Vault.$debugPrefix + 'button clicked'" chance="md.MCT_Config.Vault.$debugChance"/>
                <do_if value="md.MCT_Config.Vault.$customTabs.$resetConfirm == 0">
                    <signal_cue_instantly
                            cue="md.Simple_Menu_API.Update_Widget"
                            param="table[
                                $id = 'resetText',
                                $text = {26124, 223},
                                $color = 'Helper.color.red',
                            ]"/>
                </do_if>
                <do_else>
                    <signal_cue_instantly
                            cue="md.Simple_Menu_API.Update_Widget"
                            param="table[
                                $id = 'resetText',
                                $text = {26124, 224},
                                $color = 'Helper.color.green',
                            ]"/>
                    <raise_lua_event name="'mct.resetData'"/>
                </do_else>

                <cancel_cue cue="this"/>
            </actions>
        </cue>
        <cue name="OnCheckboxClick" instantiate="true">
            <conditions>
                <event_cue_signalled/>
            </conditions>
            <actions>
                <debug_text text="md.MCT_Config.Vault.$debugPrefix + event.param.$id + ' val: ' + event.param.$checked" chance="md.MCT_Config.Vault.$debugChance"/>
                <set_value name="md.MCT_Config.Vault.$customTabs.{'$' + event.param.$id}" exact="event.param.$checked"/>
                <cancel_cue cue="this"/>
            </actions>
        </cue>
        <cue name="OnSliderChange" instantiate="true">
            <conditions>
                <event_cue_signalled/>
            </conditions>
            <actions>
                <debug_text text="md.MCT_Config.Vault.$debugPrefix + event.param.$id + ' val: ' + event.param.$value" chance="md.MCT_Config.Vault.$debugChance"/>
                <set_value name="md.MCT_Config.Vault.$customTabs.{'$' + event.param.$id}" exact="event.param.$value"/>

                <signal_cue_instantly cue="md.Simple_Menu_API.Refresh_Menu"/>

                <cancel_cue cue="this"/>
            </actions>
        </cue>
        <cue name="OnDropDownChange" instantiate="true">
            <conditions>
                <event_cue_signalled/>
            </conditions>
            <actions>
                <set_value name="md.MCT_Config.Vault.$customTabs.{'$' + event.param.$id}" exact="event.param.$option.$value"/>
                <set_value name="md.MCT_Config.Vault.$customTabs.{'$' + event.param.$id + 'Index'}" exact="event.param.$option.$id"/>
                <cancel_cue cue="this"/>
            </actions>
        </cue>
        <cue name="OnEditBoxDeactivated" instantiate="true">
            <conditions>
                <event_cue_signalled/>
            </conditions>
            <actions>
                <debug_text text="md.MCT_Config.Vault.$debugPrefix + event.param.$id + ' val: ' + event.param.$text" chance="md.MCT_Config.Vault.$debugChance"/>
                <set_value name="md.MCT_Config.Vault.$customTabs.{'$' + event.param.$id}" exact="event.param.$text"/>
                <cancel_cue cue="this"/>
            </actions>
        </cue>
        <cue name="OnOptionsMenuClose">
            <conditions>
                <event_ui_triggered screen="'OptionsMenu'" control="'menu_close'"/>
            </conditions>
            <actions>
                <debug_text text="md.MCT_Config.Vault.$debugPrefix + 'OnOptionsMenuClose'" chance="md.MCT_Config.Vault.$debugChance"/>
                <set_value name="player.entity.$customTabsConfig" exact="md.MCT_Config.Vault.$customTabs"/>
                <raise_lua_event name="'mct.updateConfig'"/>
                <reset_cue cue="this"/>
            </actions>
        </cue>
    </cues>
</mdscript>
